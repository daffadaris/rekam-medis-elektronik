import{r as u,aD as P,o as c,b as n,a as o,F as R,aT as I,d as l,w as k,f as h,g as B,bE as d,t as O,u as m,c as E,e as S}from"./app-f0d7f9c0.js";import{s as _}from"./default-7ffdeea9.js";import{D as F}from"./DeleteButton-53ecb688.js";import{_ as K}from"./MainButtonSmall-93327a9a.js";import{_ as N}from"./SecondaryButtonSmall-8f007cfe.js";import{_ as M}from"./TextInput-beb043c0.js";import{_ as p}from"./InputError-5b64019f.js";import{_ as f}from"./InputLabel-1f97d873.js";import"./_plugin-vue_export-helper-c27b6911.js";const G=["onSubmit"],Z={key:0,class:"font-semibold text-secondhand-orange-300 mt-2"},z={key:1,class:"font-semibold text-secondhand-orange-300 mt-2"},H={class:"flex"},J={class:"w-full md:w-6/12 mr-2"},Q={class:"flex"},W={class:"w-full md:w-6/12"},X={class:"flex"},Y={class:"flex mt-3"},ee={class:"w-full md:w-6/12 mr-2"},te={class:"flex"},ae={class:"w-full md:w-6/12"},le={class:"flex"},oe={class:"flex mt-3"},se={class:"w-full"},re={class:"flex"},ce={class:"flex justify-between"},ie={class:"mt-2 mr-3"},ne={key:0,class:"text-sm text-original-teal-300"},ue={key:1,class:"text-sm text-thirdouter-red-300"},he={__name:"RiwayatAlergi",props:{practitioner_reference:{type:Object,required:!1},subject_reference:{type:Object,required:!1},encounter_reference:{type:Object,required:!0}},setup(A){const v=A,s=u([{code:[null],codeText:"",clinical:[null],verification:[null],category:[null]}]),T=()=>{let r={code:[null],codeText:"",clinical:[null],verification:[null],category:[null]};s.value.push(r)},j=r=>{s.value.splice(r,1)},D=()=>{const r=new Date().toISOString().replace("Z","+00:00").replace(/\.\d{3}/,"");s.value.forEach(t=>{t.code=t.code?(({label:e,...a})=>a)(t.code):t.code,t.clinical=t.clinical?(({definition:e,...a})=>a)(t.clinical):t.clinical,t.verification=t.verification?(({definition:e,...a})=>a)(t.verification):t.verification;const i={resourceType:"AllergyIntolerance",clinicalStatus:{coding:[t.clinical]},verificationStatus:{coding:[t.verification]},category:[t.category.code],code:{coding:[t.code],text:t.codeText},patient:v.subject_reference,encounter:v.encounter_reference,recordedDate:r,recorder:v.practitioner_reference};d.post(route("integration.store",{res_type:i.resourceType}),i).then(e=>{y.value=!0,setTimeout(()=>{y.value=!1},3e3)}).catch(e=>{console.error("Error creating user:",e),b.value=!0,setTimeout(()=>{b.value=!1},3e3)})})},y=u(!1),b=u(!1),U=async r=>{const{data:t}=await d.get(route("terminologi.get"),{params:{resourceType:"AllergyIntolerance",attribute:"code",search:r}}),i=t;for(const e in i){const a=i[e],L=`${a.display} | Code: ${a.code}`;a.label=L}return i},w=u(null),C=async()=>{const{data:r}=await d.get(route("terminologi.get"),{params:{resourceType:"AllergyIntolerance",attribute:"category"}});w.value=r},x=u(null),q=async()=>{const{data:r}=await d.get(route("terminologi.get"),{params:{resourceType:"AllergyIntolerance",attribute:"verificationStatus"}});x.value=r},V=u(null),$=async()=>{const{data:r}=await d.get(route("terminologi.get"),{params:{resourceType:"AllergyIntolerance",attribute:"clinicalStatus"}});V.value=r},g={container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer border-2 border-neutral-grey-0 ring-0 shadow-sm rounded-xl bg-white text-sm leading-snug outline-none",search:"w-full absolute inset-0 outline-none border-0 ring-0 focus:ring-original-teal-300 focus:ring-2 appearance-none box-border text-sm font-sans bg-white rounded-xl pl-3.5 rtl:pl-0 rtl:pr-3.5",placeholder:"flex items-center h-full absolute left-0 top-0 pointer-events-none bg-transparent leading-snug pl-3.5 text-gray-500 rtl:left-auto rtl:right-0 rtl:pl-0 rtl:pr-3.5",option:"flex items-center justify-start box-border text-left cursor-pointer text-sm leading-snug py-1.5 px-3",optionPointed:"text-white bg-original-teal-300",optionSelected:"text-white bg-original-teal-300",optionDisabled:"text-gray-300 cursor-not-allowed",optionSelectedPointed:"text-white bg-original-teal-300 opacity-90",optionSelectedDisabled:"text-green-100 bg-original-teal-300 bg-opacity-50 cursor-not-allowed"};return P(()=>{$(),C(),q()}),(r,t)=>(c(),n("div",null,[o("form",{onSubmit:B(D,["prevent"])},[(c(!0),n(R,null,I(s.value,(i,e)=>(c(),n("div",{class:"my-2 w-full",key:e},[e!==0?(c(),n("h3",Z,"Riwayat Alergi "+O(e+1),1)):(c(),n("h3",z,"Riwayat Alergi")),o("div",H,[o("div",J,[l(f,{for:"riwayatAlergi",value:"Riwayat Alergi"}),o("div",Q,[l(m(_),{modelValue:s.value[e].code,"onUpdate:modelValue":a=>s.value[e].code=a,mode:"single",placeholder:"Alergi","filter-results":!1,object:!0,"min-chars":1,"resolve-on-load":!1,delay:400,searchable:!0,options:U,label:"label",valueProp:"code","track-by":"code",class:"mt-1",classes:g,required:""},null,8,["modelValue","onUpdate:modelValue"])]),l(p,{class:"mt-1"})]),o("div",W,[l(f,{for:"category",value:"Kategori Alergi"}),o("div",X,[l(m(_),{modelValue:s.value[e].category,"onUpdate:modelValue":a=>s.value[e].category=a,mode:"single",placeholder:"Kategori Alergi",object:!0,options:w.value,label:"code",valueProp:"code","track-by":"code",class:"mt-1",classes:g,required:""},null,8,["modelValue","onUpdate:modelValue","options"])]),l(p,{class:"mt-1"})])]),o("div",Y,[o("div",ee,[l(f,{for:"verification_status",value:"Verification Status"}),o("div",te,[l(m(_),{modelValue:s.value[e].verification,"onUpdate:modelValue":a=>s.value[e].verification=a,mode:"single",placeholder:"Status",object:!0,options:x.value,label:"display",valueProp:"code","track-by":"code",class:"mt-1",classes:g,required:""},null,8,["modelValue","onUpdate:modelValue","options"])]),l(p,{class:"mt-1"})]),o("div",ae,[l(f,{for:"clinical_status",value:"Clinical Status"}),o("div",le,[l(m(_),{modelValue:s.value[e].clinical,"onUpdate:modelValue":a=>s.value[e].clinical=a,mode:"single",placeholder:"Status",object:!0,options:V.value,label:"display",valueProp:"code","track-by":"code",class:"mt-1",classes:g,required:""},null,8,["modelValue","onUpdate:modelValue","options"])]),l(p,{class:"mt-1"})])]),o("div",oe,[o("div",se,[l(f,{for:"codeText",value:"Keterangan"}),o("div",re,[l(M,{modelValue:s.value[e].codeText,"onUpdate:modelValue":a=>s.value[e].codeText=a,id:"codeText",type:"text",class:"text-sm mt-1 block w-full",required:"",placeholder:"Keterangan"},null,8,["modelValue","onUpdate:modelValue"]),e!==0?(c(),E(F,{key:0,onClick:a=>j(e)},null,8,["onClick"])):h("",!0)]),l(p,{class:"mt-1"})])])]))),128)),o("div",ce,[l(N,{type:"button",onClick:T,class:"teal-button-text"},{default:k(()=>[S("+ Tambah Riwayat Penyakit ")]),_:1}),o("div",ie,[l(K,{type:"submit",class:"teal-button text-original-white-0"},{default:k(()=>[S("Submit")]),_:1})])]),y.value?(c(),n("p",ne,"Sukses!")):h("",!0),b.value?(c(),n("p",ue,"Gagal!")):h("",!0)],40,G)]))}};export{he as default};
