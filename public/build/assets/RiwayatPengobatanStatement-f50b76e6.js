import{r as _,aD as M,o as c,b as i,a as l,F as B,aT as L,d as t,w as C,f as y,g as E,bE as m,t as F,u as p,h as N,bp as I,c as Z,e as x}from"./app-f0d7f9c0.js";import{s as g}from"./default-7ffdeea9.js";import{K as z}from"./main-77537e85.js";import{D as G}from"./DeleteButton-53ecb688.js";import{_ as W}from"./MainButtonSmall-93327a9a.js";import{_ as H}from"./SecondaryButtonSmall-8f007cfe.js";import{_ as P}from"./TextInput-beb043c0.js";import{_ as d}from"./InputError-5b64019f.js";import{_ as u}from"./InputLabel-1f97d873.js";import"./_plugin-vue_export-helper-c27b6911.js";const J=["onSubmit"],Q={key:0,class:"font-semibold text-secondhand-orange-300 mt-2"},X={key:1,class:"font-semibold text-secondhand-orange-300 mt-2"},Y={class:"flex"},ee={class:"w-full md:w-7/12 mr-2"},ae={class:"flex"},te={class:"w-full md:w-5/12"},oe={class:"flex"},le={class:"flex mt-3"},se={class:"w-full md:w-4/12 mr-2"},re=["onUpdate:modelValue"],ne=l("option",{value:"keluhan"},"Keluhan",-1),ce=l("option",{value:"alergi"},"Alergi",-1),ie=l("option",{value:"penyakitPribadi"},"Penyakit Pribadi",-1),de=l("option",{value:"penyakitKeluarga"},"Penyakit Keluarga",-1),ue=[ne,ce,ie,de],me={key:0,class:"w-full md:w-8/12"},pe={class:"flex"},fe={key:1,class:"w-full md:w-8/12"},be={class:"flex"},ge={key:2,class:"w-full md:w-8/12"},_e={class:"flex"},ye={key:3,class:"w-full md:w-8/12"},ve={class:"flex"},he={class:"flex mt-3"},we={class:"w-full md:w-5/12 mr-2"},ke={class:"flex"},Ve={class:"w-full md:w-7/12"},Ce={class:"flex pt-1"},xe={class:"flex mt-3"},Pe={class:"w-full"},De={class:"flex"},Te={class:"flex mt-3"},Se={class:"w-full"},Ue={class:"flex"},je={class:"flex justify-between"},Oe={class:"mt-2 mr-3"},Ke={key:0,class:"text-sm text-original-teal-300"},$e={key:1,class:"text-sm text-thirdouter-red-300"},Ze={__name:"RiwayatPengobatanStatement",props:{practitioner_reference:{type:Object,required:!1},subject_reference:{type:Object,required:!1},encounter_reference:{type:Object,required:!0}},setup(D){const v=D,o=_([{alasanObat:"keluhan",status:"",category:"",medicationCodeableConcept:"",reasonCode:"",effectiveDateTime:"",dosageText:"",note:""}]),T=()=>{let r={alasanObat:"keluhan",status:"",category:"",medicationCodeableConcept:"",reasonCode:"",effectiveDateTime:"",dosageText:"",note:""};o.value.push(r)},S=r=>{o.value.splice(r,1)},h=_(!1),w=_(!1),U=()=>{const r=new Date().toISOString().replace("Z","+00:00").replace(/\.\d{3}/,"");o.value.forEach(s=>{s.reasonCode=s.reasonCode?(({label:e,...a})=>a)(s.reasonCode):s.reasonCode,s.category=s.category?(({definition:e,...a})=>a)(s.category):s.category;const n={resourceType:"MedicationStatement",status:s.status.code,category:{coding:[s.category]},medicationCodeableConcept:{coding:[{system:"http://sys-ids.kemkes.go.id/kfa",code:s.medicationCodeableConcept.kfa_code,display:s.medicationCodeableConcept.name}]},subject:v.subject_reference,dosage:[{text:s.dosageText}],reasonCode:[{coding:[s.reasonCode]}],effectiveDateTime:new Date(s.effectiveDateTime).toISOString().replace("Z","+00:00").replace(/\.\d{3}/,""),dateAsserted:r,informationSource:v.subject_reference,context:v.encounter_reference,note:[{text:s.note}]};m.post(route("integration.store",{res_type:n.resourceType}),n).then(e=>{h.value=!0,setTimeout(()=>{h.value=!1},3e3)}).catch(e=>{console.error("Error creating user:",e),w.value=!0,setTimeout(()=>{w.value=!1},3e3)})})},j=async r=>{const{data:s}=await m.get(route("terminologi.medication"),{params:{page:1,size:10,product_type:"farmasi",keyword:r}});return s.items.data},k=_(null),O=async()=>{const{data:r}=await m.get(route("terminologi.get"),{params:{resourceType:"MedicationStatement",attribute:"status"}});k.value=r},V=_(null),K=async()=>{const{data:r}=await m.get(route("terminologi.get"),{params:{resourceType:"MedicationStatement",attribute:"category"}});V.value=r},$=async r=>{const{data:s}=await m.get(route("terminologi.condition.keluhan",{search:r})),n=s;for(const e in n){const a=n[e],b=`${a.display} | Code: ${a.code}`;a.label=b}return n},q=async r=>{const{data:s}=await m.get(route("terminologi.get"),{params:{resourceType:"AllergyIntolerance",attribute:"code",search:r}}),n=s;for(const e in n){const a=n[e],b=`${a.display} | Code: ${a.code}`;a.label=b}return n},R=async r=>{const{data:s}=await m.get(route("terminologi.condition.riwayat-pribadi",{search:r})),n=s;for(const e in n){const a=n[e],b=`${a.display} | Code: ${a.code}`;a.label=b}return n},A=async r=>{const{data:s}=await m.get(route("terminologi.condition.riwayat-keluarga",{search:r})),n=s;for(const e in n){const a=n[e],b=`${a.display} | Code: ${a.code}`;a.label=b}return n},f={container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer border-2 border-neutral-grey-0 ring-0 shadow-sm rounded-xl bg-white text-sm leading-snug outline-none",search:"w-full absolute inset-0 outline-none border-0 ring-0 focus:ring-original-teal-300 focus:ring-2 appearance-none box-border text-sm font-sans bg-white rounded-xl pl-3.5 rtl:pl-0 rtl:pr-3.5",placeholder:"flex items-center h-full absolute left-0 top-0 pointer-events-none bg-transparent leading-snug pl-3.5 text-gray-500 rtl:left-auto rtl:right-0 rtl:pl-0 rtl:pr-3.5",option:"flex items-center justify-start box-border text-left cursor-pointer text-sm leading-snug py-1.5 px-3",optionPointed:"text-white bg-original-teal-300",optionSelected:"text-white bg-original-teal-300",optionDisabled:"text-gray-300 cursor-not-allowed",optionSelectedPointed:"text-white bg-original-teal-300 opacity-90",optionSelectedDisabled:"text-green-100 bg-original-teal-300 bg-opacity-50 cursor-not-allowed"};return M(()=>{O(),K()}),(r,s)=>(c(),i("div",null,[l("form",{onSubmit:E(U,["prevent"])},[(c(!0),i(B,null,L(o.value,(n,e)=>(c(),i("div",{class:"my-2 w-full",key:e},[e!==0?(c(),i("h3",Q,"Riwayat Pengobatan "+F(e+1),1)):(c(),i("h3",X,"Riwayat Pengobatan")),l("div",Y,[l("div",ee,[t(u,{for:"riwayatPengobatan",value:"Pengobatan"}),l("div",ae,[t(p(g),{modelValue:o.value[e].medicationCodeableConcept,"onUpdate:modelValue":a=>o.value[e].medicationCodeableConcept=a,mode:"single",placeholder:"Obat","filter-results":!1,object:!0,"min-chars":1,"resolve-on-load":!1,delay:1e3,searchable:!0,options:j,label:"name",valueProp:"kfa_code","track-by":"kfa_code",class:"mt-1",classes:f,required:""},null,8,["modelValue","onUpdate:modelValue"])]),t(d,{class:"mt-1"})]),l("div",te,[t(u,{for:"status",value:"Status"}),l("div",oe,[t(p(g),{modelValue:o.value[e].status,"onUpdate:modelValue":a=>o.value[e].status=a,mode:"single",placeholder:"Status",object:!0,options:k.value,label:"display",valueProp:"code","track-by":"code",class:"mt-1",classes:f,required:""},null,8,["modelValue","onUpdate:modelValue","options"])]),t(d,{class:"mt-1"})])]),l("div",le,[l("div",se,[t(u,{for:"status",value:"Alasan"}),N(l("select",{id:"status","onUpdate:modelValue":a=>o.value[e].alasanObat=a,class:"mt-1 text-sm p-2.5 block w-full outline-none border-2 border-neutral-grey-0 ring-0 focus:border-original-teal-300 focus:ring-original-teal-300 rounded-xl shadow-sm px-2.5 h-fit"},ue,8,re),[[I,o.value[e].alasanObat]]),t(d,{class:"mt-1"})]),o.value[e].alasanObat==="keluhan"?(c(),i("div",me,[t(u,{for:"reasonCode",value:"Keluhan"}),l("div",pe,[t(p(g),{modelValue:o.value[e].reasonCode,"onUpdate:modelValue":a=>o.value[e].reasonCode=a,mode:"single",placeholder:"Keluhan","filter-results":!1,object:!0,"min-chars":1,"resolve-on-load":!1,delay:1e3,searchable:!0,options:$,label:"display",valueProp:"code","track-by":"code",class:"mt-1",classes:f,required:""},null,8,["modelValue","onUpdate:modelValue"])]),t(d,{class:"mt-1"})])):o.value[e].alasanObat==="alergi"?(c(),i("div",fe,[t(u,{for:"reasonCode",value:"Alergi"}),l("div",be,[t(p(g),{modelValue:o.value[e].reasonCode,"onUpdate:modelValue":a=>o.value[e].reasonCode=a,mode:"single",placeholder:"Alergi","filter-results":!1,object:!0,"min-chars":1,"resolve-on-load":!1,delay:1e3,searchable:!0,options:q,label:"display",valueProp:"code","track-by":"code",class:"mt-1",classes:f,required:""},null,8,["modelValue","onUpdate:modelValue"])]),t(d,{class:"mt-1"})])):o.value[e].alasanObat==="penyakitPribadi"?(c(),i("div",ge,[t(u,{for:"reasonCode",value:"Riwayat Penyakit Pribadi"}),l("div",_e,[t(p(g),{modelValue:o.value[e].reasonCode,"onUpdate:modelValue":a=>o.value[e].reasonCode=a,mode:"single",placeholder:"Penyakit","filter-results":!1,object:!0,"min-chars":1,"resolve-on-load":!1,delay:400,searchable:!0,options:R,label:"label",valueProp:"code","track-by":"code",class:"mt-1",classes:f,required:""},null,8,["modelValue","onUpdate:modelValue"])]),t(d,{class:"mt-1"})])):o.value[e].alasanObat==="penyakitKeluarga"?(c(),i("div",ye,[t(u,{for:"reasonCode",value:"Riwayat Penyakit Keluarga"}),l("div",ve,[t(p(g),{modelValue:o.value[e].reasonCode,"onUpdate:modelValue":a=>o.value[e].reasonCode=a,mode:"single",placeholder:"Penyakit","filter-results":!1,object:!0,"min-chars":1,"resolve-on-load":!1,delay:400,searchable:!0,options:A,label:"label",valueProp:"code","track-by":"code",class:"mt-1",classes:f,required:""},null,8,["modelValue","onUpdate:modelValue"])]),t(d,{class:"mt-1"})])):y("",!0)]),l("div",he,[l("div",we,[t(u,{for:"category",value:"Kategori"}),l("div",ke,[t(p(g),{modelValue:o.value[e].category,"onUpdate:modelValue":a=>o.value[e].category=a,mode:"single",placeholder:"Status",object:!0,options:V.value,label:"display",valueProp:"code","track-by":"code",class:"mt-1",classes:f,required:""},null,8,["modelValue","onUpdate:modelValue","options"])]),t(d,{class:"mt-1"})]),l("div",Ve,[t(u,{for:"effectiveDateTime",value:"Waktu"}),l("div",Ce,[t(p(z),{modelValue:o.value[e].effectiveDateTime,"onUpdate:modelValue":a=>o.value[e].effectiveDateTime=a,class:"border-[1.5px] border-neutral-grey-0 rounded-xl",required:""},null,8,["modelValue","onUpdate:modelValue"])]),t(d,{class:"mt-1"})])]),l("div",xe,[l("div",Pe,[t(u,{for:"dosage",value:"Dosis Obat"}),l("div",De,[t(P,{modelValue:o.value[e].dosageText,"onUpdate:modelValue":a=>o.value[e].dosageText=a,id:"dosage",type:"text",class:"text-sm mt-1 block w-full",placeholder:"Dosis Obat",required:""},null,8,["modelValue","onUpdate:modelValue"])]),t(d,{class:"mt-1"})])]),l("div",Te,[l("div",Se,[t(u,{for:"note",value:"Keterangan"}),l("div",Ue,[t(P,{modelValue:o.value[e].note,"onUpdate:modelValue":a=>o.value[e].note=a,id:"note",type:"text",class:"text-sm mt-1 block w-full",placeholder:"Keterangan",required:""},null,8,["modelValue","onUpdate:modelValue"]),e!==0?(c(),Z(G,{key:0,onClick:a=>S(e)},null,8,["onClick"])):y("",!0)]),t(d,{class:"mt-1"})])])]))),128)),l("div",je,[t(H,{type:"button",onClick:T,class:"teal-button-text"},{default:C(()=>[x("+ Tambah Riwayat Penyakit ")]),_:1}),l("div",Oe,[t(W,{type:"submit",class:"teal-button text-original-white-0"},{default:C(()=>[x("Submit")]),_:1})])]),h.value?(c(),i("p",Ke,"Sukses!")):y("",!0),w.value?(c(),i("p",$e,"Gagal!")):y("",!0)],40,J)]))}};export{Ze as default};
