import{r as u,aD as K,o as s,b as c,a as n,F as $,aT as P,d as r,w as _,f as p,g as B,bE as f,t as q,u as y,c as E,e as v}from"./app-bf8fb3e4.js";import{s as x}from"./default-669794a9.js";import{D as F}from"./DeleteButton-0b32c6de.js";import{_ as L}from"./MainButtonSmall-62f6226f.js";import{_ as N}from"./SecondaryButtonSmall-e3595e2c.js";import{_ as w}from"./InputError-892d609d.js";import{_ as k}from"./InputLabel-9cc85df5.js";import"./_plugin-vue_export-helper-c27b6911.js";const O=["onSubmit"],A={key:0,class:"font-semibold text-secondhand-orange-300 mt-2"},M={key:1,class:"font-semibold text-secondhand-orange-300 mt-2"},G={class:"flex"},I={class:"w-full md:w-7/12 mr-2"},R={class:"flex"},z={class:"w-full md:w-5/12"},H={class:"flex"},J={class:"flex justify-between"},Q={class:"mt-2 mr-3"},W={key:0,class:"text-sm text-original-teal-300"},X={key:1,class:"text-sm text-thirdouter-red-300"},ne={__name:"KeluhanUtama",props:{subject_reference:{type:Object,required:!1},encounter_reference:{type:Object,required:!0}},setup(S){const b=S,o=u([{code:[null],clinical:[null]}]),V=()=>{let e={code:[null],clinical:[null]};o.value.push(e)},j=e=>{o.value.splice(e,1)};u("");const d=u(!1),m=u(!1),C=()=>{o.value.forEach(e=>{e.code=e.code?(({label:l,...t})=>t)(e.code):e.code,e.clinical=e.clinical?(({definition:l,...t})=>t)(e.clinical):e.clinical;const i={resourceType:"Condition",clinicalStatus:{coding:[e.clinical]},category:[{coding:[{system:"http://terminology.hl7.org/CodeSystem/condition-category",code:"problem-list-item",display:"Problem List Item"}]}],code:{coding:[e.code]},subject:b.subject_reference,encounter:b.encounter_reference};f.post(route("integration.store",{res_type:i.resourceType}),i).then(l=>{d.value=!0,setTimeout(()=>{d.value=!1},3e3)}).catch(l=>{console.error("Error creating user:",l),m.value=!0,setTimeout(()=>{m.value=!1},3e3)})})},D=async e=>{const{data:i}=await f.get(route("terminologi.condition.keluhan",{search:e})),l=i;for(const t in l){const a=l[t],U=`${a.display} | Code: ${a.code}`;a.label=U}return l},h=u(null),T=async()=>{const{data:e}=await f.get(route("terminologi.get"),{params:{resourceType:"Condition",attribute:"clinicalStatus"}});h.value=e},g={container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer border-2 border-neutral-grey-0 ring-0 shadow-sm rounded-xl bg-white text-sm leading-snug outline-none",search:"w-full absolute inset-0 outline-none border-0 ring-0 focus:ring-original-teal-300 focus:ring-2 appearance-none box-border text-sm font-sans bg-white rounded-xl pl-3.5 rtl:pl-0 rtl:pr-3.5",placeholder:"flex items-center h-full absolute left-0 top-0 pointer-events-none bg-transparent leading-snug pl-3.5 text-gray-500 rtl:left-auto rtl:right-0 rtl:pl-0 rtl:pr-3.5",option:"flex items-center justify-start box-border text-left cursor-pointer text-sm leading-snug py-1.5 px-3",optionPointed:"text-white bg-original-teal-300",optionSelected:"text-white bg-original-teal-300",optionDisabled:"text-gray-300 cursor-not-allowed",optionSelectedPointed:"text-white bg-original-teal-300 opacity-90",optionSelectedDisabled:"text-green-100 bg-original-teal-300 bg-opacity-50 cursor-not-allowed"};return K(()=>{T()}),(e,i)=>(s(),c("div",null,[n("form",{onSubmit:B(C,["prevent"])},[(s(!0),c($,null,P(o.value,(l,t)=>(s(),c("div",{class:"my-2 w-full",key:t},[t!==0?(s(),c("h3",A,"Keluhan Utama "+q(t+1),1)):(s(),c("h3",M,"Keluhan Utama")),n("div",G,[n("div",I,[r(k,{for:"keluhan",value:"Keluhan Pasien"}),n("div",R,[r(y(x),{modelValue:o.value[t].code,"onUpdate:modelValue":a=>o.value[t].code=a,mode:"single",placeholder:"Keluhan","filter-results":!1,object:!0,"min-chars":1,"resolve-on-load":!1,delay:400,searchable:!0,options:D,label:"label",valueProp:"code","track-by":"code",class:"mt-1",classes:g,required:""},null,8,["modelValue","onUpdate:modelValue"])]),r(w,{class:"mt-1"})]),n("div",z,[r(k,{for:"clinical_status",value:"Clinical Status"}),n("div",H,[r(y(x),{modelValue:o.value[t].clinical,"onUpdate:modelValue":a=>o.value[t].clinical=a,mode:"single",placeholder:"Status",object:!0,options:h.value,label:"display",valueProp:"code","track-by":"code",class:"mt-1",classes:g,required:""},null,8,["modelValue","onUpdate:modelValue","options"]),t!==0?(s(),E(F,{key:0,onClick:a=>j(t)},null,8,["onClick"])):p("",!0)]),r(w,{class:"mt-1"})])])]))),128)),n("div",J,[r(N,{type:"button",onClick:V,class:"teal-button-text"},{default:_(()=>[v("+ Tambah Keluhan ")]),_:1}),n("div",Q,[r(L,{type:"submit",class:"teal-button text-original-white-0"},{default:_(()=>[v("Submit")]),_:1})])]),d.value?(s(),c("p",W,"Sukses!")):p("",!0),m.value?(s(),c("p",X,"Gagal!")):p("",!0)],40,O)]))}};export{ne as default};
