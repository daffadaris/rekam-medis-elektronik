import{r as p,aD as $,o as n,b as c,a as l,F as q,aT as O,d as a,w as k,f as h,g as F,bE as f,t as K,u as m,c as B,e as V}from"./app-bf8fb3e4.js";import{s as x}from"./default-669794a9.js";import{K as P}from"./main-ad08b904.js";import{D as N}from"./DeleteButton-0b32c6de.js";import{_ as A}from"./MainButtonSmall-62f6226f.js";import{_ as L}from"./SecondaryButtonSmall-e3595e2c.js";import{_ as I}from"./TextInput-181d0a07.js";import{_ as i}from"./InputError-892d609d.js";import{_ as u}from"./InputLabel-9cc85df5.js";import"./_plugin-vue_export-helper-c27b6911.js";const M=["onSubmit"],Z={key:0,class:"font-semibold text-secondhand-orange-300 mt-2"},G={key:1,class:"font-semibold text-secondhand-orange-300 mt-2"},R={class:"flex"},z={class:"w-full md:w-7/12 mr-2"},H={class:"flex"},J={class:"w-full md:w-5/12"},Q={class:"flex"},W={class:"flex mt-3 space-x-2"},X={class:"w-full md:w-6/12"},Y={class:"flex pt-1"},ee={class:"w-full md:w-6/12"},te={class:"flex pt-1"},oe={class:"flex mt-3"},ae={class:"w-full"},le={class:"flex"},re={class:"flex mt-3"},se={class:"w-full"},ne={class:"flex"},de={class:"flex justify-between"},ce={class:"mt-2 mr-3"},ie={key:0,class:"text-sm text-original-teal-300"},ue={key:1,class:"text-sm text-thirdouter-red-300"},we={__name:"Tindakan",props:{practitioner_reference:{type:Object,required:!1},subject_reference:{type:Object,required:!1},encounter_reference:{type:Object,required:!0}},setup(S){const _=S,r=p([{code:null,category:null,performedPeriodStart:"",performedPeriodEnd:"",reasonCode:null,note:""}]),T=()=>{let e={code:null,category:null,performedPeriodStart:"",performedPeriodEnd:"",reasonCode:null,note:""};r.value.push(e)},C=e=>{r.value.splice(e,1)},g=p(!1),b=p(!1),j=()=>{r.value.forEach(e=>{const d={resourceType:"Procedure",status:"completed",category:{coding:[{system:e.category.system,code:e.category.code,display:e.category.display}]},code:{coding:[{system:e.code.system,code:e.code.code,display:e.code.display}]},subject:_.subject_reference,encounter:_.encounter_reference,performedPeriod:{start:new Date(e.performedPeriodStart).toISOString().replace("Z","+00:00").replace(/\.\d{3}/,""),end:new Date(e.performedPeriodEnd).toISOString().replace("Z","+00:00").replace(/\.\d{3}/,"")},performer:[{actor:_.practitioner_reference}],reasonCode:[{coding:[{system:e.reasonCode.system,code:e.reasonCode.code,display:e.reasonCode.display_en}]}],note:[{text:e.note}]};f.post(route("integration.store",{res_type:d.resourceType}),d).then(s=>{g.value=!0,setTimeout(()=>{g.value=!1},3e3)}).catch(s=>{console.error("Error creating user:",s),b.value=!0,setTimeout(()=>{b.value=!1},3e3)})})},D=async e=>{const{data:d}=await f.get(route("terminologi.icd10",{search:e})),s=d;for(const t in s){const o=s[t],v=`${o.display_id} | Code: ${o.code}`;o.label=v}return s},U=async e=>{const{data:d}=await f.get(route("terminologi.icd9cm-procedure",{search:e})),s=d;for(const t in s){const o=s[t],v=`${o.definition} | Code: ${o.code}`;o.label=v}return s},w=p(null),E=async()=>{const{data:e}=await f.get(route("terminologi.get"),{params:{resourceType:"Procedure",attribute:"category"}});w.value=e},y={container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer border-2 border-neutral-grey-0 ring-0 shadow-sm rounded-xl bg-white text-sm leading-snug outline-none",search:"w-full absolute inset-0 outline-none border-0 ring-0 focus:ring-original-teal-300 focus:ring-2 appearance-none box-border text-sm font-sans bg-white rounded-xl pl-3.5 rtl:pl-0 rtl:pr-3.5",placeholder:"flex items-center h-full absolute left-0 top-0 pointer-events-none bg-transparent leading-snug pl-3.5 text-gray-500 rtl:left-auto rtl:right-0 rtl:pl-0 rtl:pr-3.5",option:"flex items-center justify-start box-border text-left cursor-pointer text-sm leading-snug py-1.5 px-3",optionPointed:"text-white bg-original-teal-300",optionSelected:"text-white bg-original-teal-300",optionDisabled:"text-gray-300 cursor-not-allowed",optionSelectedPointed:"text-white bg-original-teal-300 opacity-90",optionSelectedDisabled:"text-green-100 bg-original-teal-300 bg-opacity-50 cursor-not-allowed"};return $(()=>{E()}),(e,d)=>(n(),c("div",null,[l("form",{onSubmit:F(j,["prevent"])},[(n(!0),c(q,null,O(r.value,(s,t)=>(n(),c("div",{class:"my-2 w-full",key:t},[t!==0?(n(),c("h3",Z,"Tindakan "+K(t+1),1)):(n(),c("h3",G,"Tindakan")),l("div",R,[l("div",z,[a(u,{for:"tindakan",value:"Tindakan"}),l("div",H,[a(m(x),{modelValue:r.value[t].code,"onUpdate:modelValue":o=>r.value[t].code=o,mode:"single",placeholder:"Tindakan","filter-results":!1,object:!0,"min-chars":1,"resolve-on-load":!1,delay:1e3,searchable:!0,options:U,label:"label",valueProp:"code","track-by":"code",class:"mt-1",classes:y,required:""},null,8,["modelValue","onUpdate:modelValue"])]),a(i,{class:"mt-1"})]),l("div",J,[a(u,{for:"category",value:"Kategori"}),l("div",Q,[a(m(x),{modelValue:r.value[t].category,"onUpdate:modelValue":o=>r.value[t].category=o,mode:"single",placeholder:"Kategori",object:!0,options:w.value,label:"display",valueProp:"code","track-by":"code",class:"mt-1",classes:y,required:""},null,8,["modelValue","onUpdate:modelValue","options"])]),a(i,{class:"mt-1"})])]),l("div",W,[l("div",X,[a(u,{for:"performedPeriodStart",value:"Tindakan Dimulai"}),l("div",Y,[a(m(P),{modelValue:r.value[t].performedPeriodStart,"onUpdate:modelValue":o=>r.value[t].performedPeriodStart=o,class:"border-[1.5px] border-neutral-grey-0 rounded-xl",required:""},null,8,["modelValue","onUpdate:modelValue"])]),a(i,{class:"mt-1"})]),l("div",ee,[a(u,{for:"performedPeriodEnd",value:"Tindakan Selesai"}),l("div",te,[a(m(P),{modelValue:r.value[t].performedPeriodEnd,"onUpdate:modelValue":o=>r.value[t].performedPeriodEnd=o,class:"border-[1.5px] border-neutral-grey-0 rounded-xl",required:""},null,8,["modelValue","onUpdate:modelValue"])]),a(i,{class:"mt-1"})])]),l("div",oe,[l("div",ae,[a(u,{for:"reasonCode",value:"Alasan Tindakan"}),l("div",le,[a(m(x),{modelValue:r.value[t].reasonCode,"onUpdate:modelValue":o=>r.value[t].reasonCode=o,mode:"single",placeholder:"Diagnosa","filter-results":!1,object:!0,"min-chars":1,"resolve-on-load":!1,delay:1e3,searchable:!0,options:D,label:"label",valueProp:"code","track-by":"code",class:"mt-1",classes:y,required:""},null,8,["modelValue","onUpdate:modelValue"])]),a(i,{class:"mt-1"})])]),l("div",re,[l("div",se,[a(u,{for:"note",value:"Keterangan"}),l("div",ne,[a(I,{modelValue:r.value[t].note,"onUpdate:modelValue":o=>r.value[t].note=o,id:"note",type:"text",class:"text-sm mt-1 block w-full",placeholder:"Keterangan",required:""},null,8,["modelValue","onUpdate:modelValue"]),t!==0?(n(),B(N,{key:0,onClick:o=>C(t)},null,8,["onClick"])):h("",!0)]),a(i,{class:"mt-1"})])])]))),128)),l("div",de,[a(L,{type:"button",onClick:T,class:"teal-button-text"},{default:k(()=>[V("+ Tambah Tindakan ")]),_:1}),l("div",ce,[a(A,{type:"submit",class:"teal-button text-original-white-0"},{default:k(()=>[V("Submit")]),_:1})])]),g.value?(n(),c("p",ie,"Sukses!")):h("",!0),b.value?(n(),c("p",ue,"Gagal!")):h("",!0)],40,M)]))}};export{we as default};
