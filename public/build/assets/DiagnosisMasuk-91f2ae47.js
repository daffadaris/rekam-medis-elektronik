import{r as n,aD as k,o as d,b as m,a as o,d as l,u as x,w as C,f as y,g as T,bE as p,e as $}from"./app-f0d7f9c0.js";import{s as h}from"./default-7ffdeea9.js";import{_ as q}from"./TextInput-beb043c0.js";import{_ as E}from"./MainButtonSmall-93327a9a.js";import{_ as f}from"./InputError-5b64019f.js";import{_ as g}from"./InputLabel-1f97d873.js";const M=["onSubmit"],N={class:"my-2 w-full"},O=o("h3",{class:"font-semibold text-secondhand-orange-300 mt-2"},"Diagnosa Masuk",-1),P={class:"flex"},B={class:"w-full md:w-7/12 mr-2"},U={class:"flex"},A={class:"w-full md:w-5/12"},K={class:"flex"},L={class:"flex mt-3"},F={class:"w-full"},G={class:"flex"},I={class:"flex justify-end"},R={class:"mt-2 mr-3"},Z={key:0,class:"text-sm text-original-teal-300"},z={key:1,class:"text-sm text-thirdouter-red-300"},ee={__name:"DiagnosisMasuk",props:{subject_reference:{type:Object,required:!1},encounter_reference:{type:Object,required:!0}},setup(w){const b=w,e=n({code:null,clinicalStatus:null,note:""}),i=n(!1),r=n(!1),S=()=>{e.value.clinicalStatus=e.value.clinicalStatus?(({definition:t,...c})=>c)(e.value.clinicalStatus):e.value.clinicalStatus;const a=new Date().toISOString().replace("Z","+00:00").replace(/\.\d{3}/,""),s={resourceType:"Condition",clinicalStatus:{coding:[e.value.clinicalStatus]},category:[{coding:[{system:"http://terminology.hl7.org/CodeSystem/condition-category",code:"encounter-diagnosis",display:"Encounter Diagnosis"}]}],code:{coding:[{system:e.value.code.system,code:e.value.code.code,display:e.value.code.display_en}]},subject:b.subject_reference,encounter:b.encounter_reference,onsetDateTime:a,recordedDate:a,note:[{text:e.value.note}]};p.post(route("integration.store",{res_type:s.resourceType}),s).then(t=>{i.value=!0,setTimeout(()=>{i.value=!1},3e3)}).catch(t=>{console.error("Error creating user:",t),r.value=!0,setTimeout(()=>{r.value=!1},3e3)})},V=async a=>{const{data:s}=await p.get(route("terminologi.icd10",{search:a})),t=s;for(const c in t){const u=t[c],j=`${u.display_id} | Code: ${u.code}`;u.label=j}return t},_=n(null),D=async()=>{const{data:a}=await p.get(route("terminologi.get"),{params:{resourceType:"Condition",attribute:"clinicalStatus"}});_.value=a},v={container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer border-2 border-neutral-grey-0 ring-0 shadow-sm rounded-xl bg-white text-sm leading-snug outline-none",search:"w-full absolute inset-0 outline-none border-0 ring-0 focus:ring-original-teal-300 focus:ring-2 appearance-none box-border text-sm font-sans bg-white rounded-xl pl-3.5 rtl:pl-0 rtl:pr-3.5",placeholder:"flex items-center h-full absolute left-0 top-0 pointer-events-none bg-transparent leading-snug pl-3.5 text-gray-500 rtl:left-auto rtl:right-0 rtl:pl-0 rtl:pr-3.5",option:"flex items-center justify-start box-border text-left cursor-pointer text-sm leading-snug py-1.5 px-3",optionPointed:"text-white bg-original-teal-300",optionSelected:"text-white bg-original-teal-300",optionDisabled:"text-gray-300 cursor-not-allowed",optionSelectedPointed:"text-white bg-original-teal-300 opacity-90",optionSelectedDisabled:"text-green-100 bg-original-teal-300 bg-opacity-50 cursor-not-allowed"};return k(()=>{D()}),(a,s)=>(d(),m("div",null,[o("form",{onSubmit:T(S,["prevent"])},[o("div",N,[O,o("div",P,[o("div",B,[l(g,{for:"diagnosa",value:"Diagnosa"}),o("div",U,[l(x(h),{modelValue:e.value.code,"onUpdate:modelValue":s[0]||(s[0]=t=>e.value.code=t),mode:"single",placeholder:"Diagnosa","filter-results":!1,object:!0,"min-chars":1,"resolve-on-load":!1,delay:400,searchable:!0,options:V,label:"label",valueProp:"code","track-by":"code",class:"mt-1",classes:v,required:""},null,8,["modelValue"])]),l(f,{class:"mt-1"})]),o("div",A,[l(g,{for:"clinical_status",value:"Clinical Status"}),o("div",K,[l(x(h),{modelValue:e.value.clinicalStatus,"onUpdate:modelValue":s[1]||(s[1]=t=>e.value.clinicalStatus=t),mode:"single",placeholder:"Status",object:!0,options:_.value,label:"display",valueProp:"code","track-by":"code",class:"mt-1",classes:v,required:""},null,8,["modelValue","options"])]),l(f,{class:"mt-1"})])]),o("div",L,[o("div",F,[l(g,{for:"note",value:"Keterangan"}),o("div",G,[l(q,{modelValue:e.value.note,"onUpdate:modelValue":s[2]||(s[2]=t=>e.value.note=t),id:"note",type:"text",class:"text-sm mt-1 block w-full",placeholder:"Keterangan",required:""},null,8,["modelValue"])]),l(f,{class:"mt-1"})])])]),o("div",I,[o("div",R,[l(E,{type:"submit",class:"teal-button text-original-white-0"},{default:C(()=>[$("Submit")]),_:1})])]),i.value?(d(),m("p",Z,"Sukses!")):y("",!0),r.value?(d(),m("p",z,"Gagal!")):y("",!0)],40,M)]))}};export{ee as default};
