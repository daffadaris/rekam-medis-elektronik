import{r as u,aD as R,o as s,b as n,a as i,F as $,aT as B,d as r,w as _,f as m,g as q,bE as b,t as E,u as h,c as F,e as v}from"./app-bf8fb3e4.js";import{s as w}from"./default-669794a9.js";import{D as L}from"./DeleteButton-0b32c6de.js";import{_ as N}from"./MainButtonSmall-62f6226f.js";import{_ as U}from"./SecondaryButtonSmall-e3595e2c.js";import{_ as x}from"./InputError-892d609d.js";import{_ as k}from"./InputLabel-9cc85df5.js";import"./_plugin-vue_export-helper-c27b6911.js";const O=["onSubmit"],A={key:0,class:"font-semibold text-secondhand-orange-300 mt-2"},M={key:1,class:"font-semibold text-secondhand-orange-300 mt-2"},G={class:"flex"},I={class:"w-full md:w-7/12 mr-2"},z={class:"flex"},H={class:"w-full md:w-5/12"},J={class:"flex"},K={class:"flex justify-between"},Q={class:"mt-2 mr-3"},W={key:0,class:"text-sm text-original-teal-300"},X={key:1,class:"text-sm text-thirdouter-red-300"},ie={__name:"RiwayatPenyakitPribadi",props:{subject_reference:{type:Object,required:!1},encounter_reference:{type:Object,required:!0}},setup(P){const f=P,o=u([{code:[null],clinical:[null]}]),S=()=>{let e={code:[null],clinical:[null]};o.value.push(e)},V=e=>{o.value.splice(e,1)},d=u(!1),p=u(!1),j=()=>{o.value.forEach(e=>{e.code=e.code?(({label:a,...t})=>t)(e.code):e.code,e.clinical=e.clinical?(({definition:a,...t})=>t)(e.clinical):e.clinical;const c={resourceType:"Condition",clinicalStatus:{coding:[e.clinical]},category:[{coding:[{system:"http://terminology.hl7.org/CodeSystem/condition-category",code:"problem-list-item",display:"Problem List Item"}]}],code:{coding:[e.code]},subject:f.subject_reference,encounter:f.encounter_reference};b.post(route("integration.store",{res_type:c.resourceType}),c).then(a=>{d.value=!0,setTimeout(()=>{d.value=!1},3e3)}).catch(a=>{console.error("Error creating user:",a),p.value=!0,setTimeout(()=>{p.value=!1},3e3)})})},C=async e=>{const{data:c}=await b.get(route("terminologi.condition.riwayat-pribadi",{search:e})),a=c;for(const t in a){const l=a[t],T=`${l.display} | Code: ${l.code}`;l.label=T}return a},y=u(null),D=async()=>{const{data:e}=await b.get(route("terminologi.get"),{params:{resourceType:"Condition",attribute:"clinicalStatus"}});y.value=e},g={container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer border-2 border-neutral-grey-0 ring-0 shadow-sm rounded-xl bg-white text-sm leading-snug outline-none",search:"w-full absolute inset-0 outline-none border-0 ring-0 focus:ring-original-teal-300 focus:ring-2 appearance-none box-border text-sm font-sans bg-white rounded-xl pl-3.5 rtl:pl-0 rtl:pr-3.5",placeholder:"flex items-center h-full absolute left-0 top-0 pointer-events-none bg-transparent leading-snug pl-3.5 text-gray-500 rtl:left-auto rtl:right-0 rtl:pl-0 rtl:pr-3.5",option:"flex items-center justify-start box-border text-left cursor-pointer text-sm leading-snug py-1.5 px-3",optionPointed:"text-white bg-original-teal-300",optionSelected:"text-white bg-original-teal-300",optionDisabled:"text-gray-300 cursor-not-allowed",optionSelectedPointed:"text-white bg-original-teal-300 opacity-90",optionSelectedDisabled:"text-green-100 bg-original-teal-300 bg-opacity-50 cursor-not-allowed"};return R(()=>{D()}),(e,c)=>(s(),n("div",null,[i("form",{onSubmit:q(j,["prevent"])},[(s(!0),n($,null,B(o.value,(a,t)=>(s(),n("div",{class:"my-2 w-full",key:t},[t!==0?(s(),n("h3",A,"Riwayat Penyakit Pribadi "+E(t+1),1)):(s(),n("h3",M,"Riwayat Penyakit Pribadi")),i("div",G,[i("div",I,[r(k,{for:"riwayatPenyakit",value:"Riwayat Penyakit"}),i("div",z,[r(h(w),{modelValue:o.value[t].code,"onUpdate:modelValue":l=>o.value[t].code=l,mode:"single",placeholder:"Penyakit","filter-results":!1,object:!0,"min-chars":1,"resolve-on-load":!1,delay:400,searchable:!0,options:C,label:"label",valueProp:"code","track-by":"code",class:"mt-1",classes:g,required:""},null,8,["modelValue","onUpdate:modelValue"])]),r(x,{class:"mt-1"})]),i("div",H,[r(k,{for:"clinical_status",value:"Clinical Status"}),i("div",J,[r(h(w),{modelValue:o.value[t].clinical,"onUpdate:modelValue":l=>o.value[t].clinical=l,mode:"single",placeholder:"Status",object:!0,options:y.value,label:"display",valueProp:"code","track-by":"code",class:"mt-1",classes:g,required:""},null,8,["modelValue","onUpdate:modelValue","options"]),t!==0?(s(),F(L,{key:0,onClick:l=>V(t)},null,8,["onClick"])):m("",!0)]),r(x,{class:"mt-1"})])])]))),128)),i("div",K,[r(U,{type:"button",onClick:S,class:"teal-button-text"},{default:_(()=>[v("+ Tambah Riwayat Penyakit ")]),_:1}),i("div",Q,[r(N,{type:"submit",class:"teal-button text-original-white-0"},{default:_(()=>[v("Submit")]),_:1})])]),d.value?(s(),n("p",W,"Sukses!")):m("",!0),p.value?(s(),n("p",X,"Gagal!")):m("",!0)],40,O)]))}};export{ie as default};
