import{r as c,aD as D,o as a,b as l,a as t,F as T,aT as j,d as o,w as y,f,g as q,bE as h,t as C,u as b,c as F,e as g}from"./app-bf8fb3e4.js";import{K as k}from"./main-ad08b904.js";import{D as U}from"./DeleteButton-0b32c6de.js";import{_ as $}from"./MainButtonSmall-62f6226f.js";import{_ as B}from"./SecondaryButtonSmall-e3595e2c.js";import{_ as O}from"./TextArea-83e3e5c4.js";import{_}from"./InputError-892d609d.js";import{_ as v}from"./InputLabel-9cc85df5.js";import"./_plugin-vue_export-helper-c27b6911.js";const N=["onSubmit"],L={key:0,class:"font-semibold text-secondhand-orange-300 mt-2"},A={key:1,class:"font-semibold text-secondhand-orange-300 mt-2"},I={class:"flex mt-3 space-x-2"},K={class:"w-full md:w-6/12"},M={class:"flex pt-1"},Z={class:"w-full md:w-6/12"},G={class:"flex pt-1"},R={class:"flex mt-3"},z={class:"w-full"},H={class:"flex"},J={class:"flex justify-between"},Q={class:"mt-2 mr-3"},W={key:0,class:"text-sm text-original-teal-300"},X={key:1,class:"text-sm text-thirdouter-red-300"},ce={__name:"Edukasi",props:{practitioner_reference:{type:Object,required:!1},subject_reference:{type:Object,required:!1},encounter_reference:{type:Object,required:!0}},setup(E){const n=E,r=c([{performedPeriodStart:"",performedPeriodEnd:"",note:""}]),x=()=>{let s={performedPeriodStart:"",performedPeriodEnd:"",note:""};r.value.push(s)},V=s=>{r.value.splice(s,1)},i=c(!1),u=c(!1),S=()=>{r.value.forEach(s=>{const m={resourceType:"Procedure",status:"completed",category:{coding:[{system:"http://snomed.info/sct",code:"409073007",display:"Education"}],text:"Education"},code:{coding:[{system:"http://snomed.info/sct",code:"84635008",display:"Disease process or condition education "}]},subject:n.subject_reference,encounter:n.encounter_reference,performedPeriod:{start:new Date(s.performedPeriodStart).toISOString().replace("Z","+00:00").replace(/\.\d{3}/,""),end:new Date(s.performedPeriodEnd).toISOString().replace("Z","+00:00").replace(/\.\d{3}/,"")},performer:[{actor:n.practitioner_reference}],note:[{text:s.note}]};h.post(route("integration.store",{res_type:m.resourceType}),m).then(p=>{i.value=!0,setTimeout(()=>{i.value=!1},3e3)}).catch(p=>{console.error("Error creating user:",p),u.value=!0,setTimeout(()=>{u.value=!1},3e3)})})},w=c(null),P=async()=>{const{data:s}=await h.get(route("terminologi.get"),{params:{resourceType:"Procedure",attribute:"category"}});w.value=s};return D(()=>{P()}),(s,m)=>(a(),l("div",null,[t("form",{onSubmit:q(S,["prevent"])},[(a(!0),l(T,null,j(r.value,(p,e)=>(a(),l("div",{class:"my-2 w-full",key:e},[e!==0?(a(),l("h3",L,"Edukasi "+C(e+1),1)):(a(),l("h3",A,"Edukasi")),t("div",I,[t("div",K,[o(v,{for:"performedPeriodStart",value:"Edukasi Dimulai"}),t("div",M,[o(b(k),{modelValue:r.value[e].performedPeriodStart,"onUpdate:modelValue":d=>r.value[e].performedPeriodStart=d,class:"border-[1.5px] border-neutral-grey-0 rounded-xl",required:""},null,8,["modelValue","onUpdate:modelValue"])]),o(_,{class:"mt-1"})]),t("div",Z,[o(v,{for:"performedPeriodEnd",value:"Edukasi Selesai"}),t("div",G,[o(b(k),{modelValue:r.value[e].performedPeriodEnd,"onUpdate:modelValue":d=>r.value[e].performedPeriodEnd=d,class:"border-[1.5px] border-neutral-grey-0 rounded-xl",required:""},null,8,["modelValue","onUpdate:modelValue"])]),o(_,{class:"mt-1"})])]),t("div",R,[t("div",z,[o(v,{for:"note",value:"Edukasi"}),t("div",H,[o(O,{modelValue:r.value[e].note,"onUpdate:modelValue":d=>r.value[e].note=d,id:"note",type:"text",class:"text-sm mt-1 block w-full",placeholder:"Edukasi yang diberikan",required:""},null,8,["modelValue","onUpdate:modelValue"]),e!==0?(a(),F(U,{key:0,onClick:d=>V(e)},null,8,["onClick"])):f("",!0)]),o(_,{class:"mt-1"})])])]))),128)),t("div",J,[o(B,{type:"button",onClick:x,class:"teal-button-text"},{default:y(()=>[g("+ Tambah Edukasi ")]),_:1}),t("div",Q,[o($,{type:"submit",class:"teal-button text-original-white-0"},{default:y(()=>[g("Submit")]),_:1})])]),i.value?(a(),l("p",W,"Sukses!")):f("",!0),u.value?(a(),l("p",X,"Gagal!")):f("",!0)],40,N)]))}};export{ce as default};
