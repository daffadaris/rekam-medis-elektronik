import{r as o,bt as h,o as l,b as r,a as e,t as b,g as f,h as g,bp as w,F as x,aT as y,d as S,w as k,f as m,e as j,bE as V}from"./app-bf8fb3e4.js";import{_ as T}from"./MainButtonSmall-62f6226f.js";const E={class:"my-2 w-full"},N={class:"relative overflow-x-auto mb-5"},A={class:"w-full text-base text-left text-neutral-grey-200"},B={class:"bg-original-white-0 border-b"},C=e("th",{scope:"row",class:"px-6 py-4 font-normal whitespace-nowrap w-1/3"}," Status Kunjungan ",-1),D={class:"px-6 py-4 w-2/3"},F=e("h3",{class:"font-semibold text-secondhand-orange-300 mt-2"},"Ubah status kunjungan",-1),H=["onSubmit"],O=["value"],I={class:"flex justify-between"},K={class:"mt-2 mr-3"},M={key:0,class:"text-sm text-original-teal-300"},P={key:1,class:"text-sm text-thirdouter-red-300"},G={__name:"StatusKunjungan",props:{encounter:{type:Object,required:!0}},setup(_){const i=_,a=o(""),p=[{id:"planned",label:"Planned"},{id:"arrived",label:"Arrived"},{id:"triaged",label:"Triaged"},{id:"in-progress",label:"In Progress"},{id:"onleave",label:"Onleave"},{id:"finished",label:"Finished"},{id:"cancelled",label:"Cancelled"}],t=o({});h(()=>i.encounter,()=>{t.value=i.encounter,a.value=t.value.status},{immediate:!0});const u=o(!1),c=o(!1),v=async()=>{const d=new Date().toISOString().replace("Z","+00:00").replace(/\.\d{3}/,"");t.value.statusHistory[t.value.statusHistory.length-1].period.end=d,t.value.status=a.value;const n={status:a.value,period:{start:d}};t.value.statusHistory.push(n),await V.put(route("integration.update",{res_type:"Encounter",satusehat_id:i.encounter.id}),t.value).then(s=>{u.value=!0,setTimeout(()=>{u.value=!1},3e3)}).catch(s=>{console.error("Error creating user:",s),c.value=!0,setTimeout(()=>{c.value=!1},3e3)})};return(d,n)=>(l(),r("div",null,[e("div",E,[e("div",N,[e("table",A,[e("tbody",null,[e("tr",B,[C,e("td",D,b(_.encounter.status),1)])])])]),e("div",null,[F,e("form",{onSubmit:f(v,["prevent"])},[g(e("select",{id:"status","onUpdate:modelValue":n[0]||(n[0]=s=>a.value=s),class:"block mt-2 w-full outline-none border-2 border-neutral-grey-0 ring-0 focus:border-original-teal-300 focus:ring-original-teal-300 rounded-xl shadow-sm px-2.5 h-fit"},[(l(),r(x,null,y(p,s=>e("option",{value:s.id},b(s.label),9,O)),64))],512),[[w,a.value]]),e("div",I,[e("div",K,[S(T,{type:"submit",class:"teal-button text-original-white-0"},{default:k(()=>[j("Submit ")]),_:1})])]),u.value?(l(),r("p",M,"Sukses!")):m("",!0),c.value?(l(),r("p",P,"Gagal!")):m("",!0)],40,H)])])]))}};export{G as default};
