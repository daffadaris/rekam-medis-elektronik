import{r,aD as b,o as u,b as d,a as e,d as s,w as x,f as _,g as k,bE as f,e as w}from"./app-f0d7f9c0.js";import{_ as V}from"./MainButtonSmall-93327a9a.js";import{_ as D}from"./TextArea-3d40350d.js";import{_ as j}from"./TextInput-beb043c0.js";import{_ as p}from"./InputError-5b64019f.js";import{_ as v}from"./InputLabel-1f97d873.js";const E=["onSubmit"],S={class:"my-2 w-full"},T=e("h3",{class:"font-semibold text-secondhand-orange-300 mt-2"},"Edukasi Diet",-1),q={class:"flex"},$={class:"w-full"},N={class:"flex"},O={class:"flex mt-3"},R={class:"w-full"},z={class:"flex"},B={class:"flex justify-between"},C={class:"mt-2 mr-3"},A={key:0,class:"text-sm text-original-teal-300"},J={key:1,class:"text-sm text-thirdouter-red-300"},P={__name:"Diet",props:{practitioner_reference:{type:Object,required:!1},subject_reference:{type:Object,required:!1},encounter_reference:{type:Object,required:!0}},setup(h){const l=h,o=r({title:"",note:""}),n=r(!1),c=r(!1),m=r(null),y=async()=>{const{data:i}=await f.get(route("form.ref.organization",{layanan:"induk"}));m.value=i},g=()=>{const i=new Date().toISOString().replace("Z","+00:00").replace(/\.\d{3}/,""),t={resourceType:"Composition",status:"final",type:{coding:[{system:"http://loinc.org",code:"18842-5",display:"Discharge summary"}]},category:[{coding:[{system:"http://loinc.org",code:"LP173421-1",display:"Report"}]}],subject:l.subject_reference,encounter:l.encounter_reference,date:i,author:[l.practitioner_reference],title:o.value.title,custodian:m.value,section:[{code:{coding:[{system:"http://loinc.org",code:"42344-2",display:"Discharge diet (narrative)"}]},text:{status:"additional",div:o.value.note}}]};f.post(route("integration.store",{res_type:t.resourceType}),t).then(a=>{n.value=!0,setTimeout(()=>{n.value=!1},3e3)}).catch(a=>{console.error("Error creating user:",a),c.value=!0,setTimeout(()=>{c.value=!1},3e3)})};return b(()=>{y()}),(i,t)=>(u(),d("div",null,[e("form",{onSubmit:k(g,["prevent"])},[e("div",S,[T,e("div",q,[e("div",$,[s(v,{for:"title",value:"Judul Edukasi Diet"}),e("div",N,[s(j,{modelValue:o.value.title,"onUpdate:modelValue":t[0]||(t[0]=a=>o.value.title=a),id:"title",type:"text",class:"text-sm mt-1 block w-full",placeholder:"Judul edukasi yang diberikan",required:""},null,8,["modelValue"])]),s(p,{class:"mt-1"})])]),e("div",O,[e("div",R,[s(v,{for:"note",value:"Edukasi Diet"}),e("div",z,[s(D,{modelValue:o.value.note,"onUpdate:modelValue":t[1]||(t[1]=a=>o.value.note=a),id:"note",type:"text",class:"text-sm mt-1 block w-full",placeholder:"Edukasi yang diberikan",required:""},null,8,["modelValue"])]),s(p,{class:"mt-1"})])])]),e("div",B,[e("div",C,[s(V,{type:"submit",class:"teal-button text-original-white-0"},{default:x(()=>[w("Submit")]),_:1})])]),n.value?(u(),d("p",A,"Sukses!")):_("",!0),c.value?(u(),d("p",J,"Gagal!")):_("",!0)],40,E)]))}};export{P as default};
