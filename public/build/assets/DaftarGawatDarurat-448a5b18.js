import{r as l,aD as I,o as x,c as L,w as u,bE as d,d as n,a,u as m,i as $,e as b,g as T,h as E,bp as R,b as N,aT as K,t as M,F as O}from"./app-f0d7f9c0.js";import{s as v}from"./default-7ffdeea9.js";import{_ as U}from"./AuthenticatedLayoutBack-0850d741.js";import{_ as B}from"./MainButton-87431bfc.js";import{_ as p}from"./InputError-5b64019f.js";import{_ as g}from"./InputLabel-1f97d873.js";import{_ as F}from"./Modal-11ba5be7.js";import"./AuthenticatedLayout-fe97c644.js";import"./AppHead-4fb5dcc8.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./BackButton-dbfd014f.js";const G=a("title",null,"Daftar Rawat Inap - ",-1),q={class:"p-6"},z=a("h2",{class:"text-lg text-center font-medium text-gray-900"},[b(" Data kunjungan telah berhasil dibuat. "),a("br"),b(" Kembali ke halaman Gawat Darurat. ")],-1),A={class:"mt-6 flex justify-end"},H={class:"bg-original-white-0 shadow rounded-xl md:rounded-2xl mb-8 p-6 md:py-8 md:px-10"},Z=a("h1",{class:"text-2xl font-bold text-neutral-black-300"},"Daftar IGD",-1),J=a("p",{class:"mb-3 text-base font-normal text-neutral-grey-100"},"Halaman pendaftaran IGD.",-1),Q=["onSubmit"],W={class:"mt-4"},X=["value"],Y={class:"mt-4"},ee={class:"mt-4"},te={class:"mt-4"},ae={class:"flex flex-col items-center justify-end mt-10"},be={__name:"DaftarGawatDarurat",setup(se){const t=l({status_kunjungan:"arrived",patient:null,dokter:null,lokasi_ruangan:null}),w=async o=>{const{data:s}=await d.get(route("rekam-medis.index",{nik:o})),e=s.rekam_medis.data;for(const r in e){const i=e[r],V=`${i.name} | NIK: ${i.nik}`;i.label=V}return e},_=l(null),D=async()=>{const{data:o}=await d.get(route("form.index.encounter"));_.value=o},h=l(null),S=async()=>{const{data:o}=await d.get(route("form.index.location")),s=o;for(const e in s){const r=s[e],i=`${r.name} | ${r.serviceClass}`;r.label=i}h.value=o},y=l(null),C=async()=>{const{data:o}=await d.get(route("form.ref.organization",{layanan:"induk"}));y.value=o},j=async()=>{c.value=!0;const o=new Date().toISOString().replace("Z","+00:00").replace(/\.\d{3}/,""),s={resourceType:"Encounter",status:t.value.status_kunjungan,class:{system:"http://terminology.hl7.org/CodeSystem/v3-ActCode",code:"EMER",display:"emergency"},subject:{reference:"Patient/"+t.value.patient["ihs-number"],display:t.value.patient.name},participant:[{type:[{coding:[{system:"http://terminology.hl7.org/CodeSystem/v3-ParticipationType",code:"ATND",display:"attender"}]}],individual:{reference:"Practitioner/"+t.value.dokter.satusehat_id,display:t.value.dokter.name}}],period:{start:o},location:[{location:{reference:"Location/"+t.value.lokasi_ruangan.satusehat_id,display:t.value.lokasi_ruangan.name},period:{start:o},extension:[{url:"https://fhir.kemkes.go.id/r4/StructureDefinition/ServiceClass",extension:[{url:"value",valueCodeableConcept:{coding:[{system:"http://terminology.kemkes.go.id/CodeSystem/locationServiceClass-Outpatient",code:t.value.lokasi_ruangan.serviceClass.split(" ")[1].toLowerCase(),display:t.value.lokasi_ruangan.serviceClass}]}},{url:"upgradeClassIndicator",valueCodeableConcept:{coding:[{system:"http://terminology.kemkes.go.id/CodeSystem/locationUpgradeClass",code:"kelas-tetap",display:"Kelas Tetap Perawatan"}]}}]}]}],statusHistory:[{status:t.value.status_kunjungan,period:{start:o}}],serviceProvider:y.value};d.post(route("integration.store",{res_type:"Encounter"}),s).then(e=>{c.value=!1,k.value=!0}).catch(e=>{c.value=!1,console.error("Error creating user:",e)})},k=l(!1),c=l(!1),P=[{id:"planned",label:"Planned"},{id:"arrived",label:"Arrived"},{id:"triaged",label:"Triaged"},{id:"in-progress",label:"In Progress"},{id:"onleave",label:"Onleave"},{id:"finished",label:"Finished"},{id:"cancelled",label:"Cancelled"}],f={container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer border-2 border-neutral-grey-0 ring-0 shadow-sm rounded-xl bg-white text-base leading-snug outline-none",search:"w-full absolute inset-0 outline-none border-0 ring-0 focus:ring-original-teal-300 focus:ring-2 appearance-none box-border text-base font-sans bg-white rounded-xl pl-3.5 rtl:pl-0 rtl:pr-3.5",placeholder:"flex items-center h-full absolute left-0 top-0 pointer-events-none bg-transparent leading-snug pl-3.5 text-gray-500 rtl:left-auto rtl:right-0 rtl:pl-0 rtl:pr-3.5",optionPointed:"text-white bg-original-teal-300",optionSelected:"text-white bg-original-teal-300",optionDisabled:"text-gray-300 cursor-not-allowed",optionSelectedPointed:"text-white bg-original-teal-300 opacity-90",optionSelectedDisabled:"text-green-100 bg-original-teal-300 bg-opacity-50 cursor-not-allowed"};return I(()=>{D(),S(),C()}),(o,s)=>(x(),L(U,null,{apphead:u(()=>[G]),default:u(()=>[n(F,{show:k.value},{default:u(()=>[a("div",q,[z,a("div",A,[n(m($),{href:o.route("gawatdarurat"),class:"mx-auto mb-3 w-fit block justify-center px-4 py-2 border border-transparent rounded-lg font-semibold text-sm teal-button text-original-white-0 transition ease-in-out duration-150 hover:shadow-lg"},{default:u(()=>[b(" Kembali ")]),_:1},8,["href"])])])]),_:1},8,["show"]),a("div",H,[Z,J,a("form",{onSubmit:T(j,["prevent"])},[a("div",W,[n(g,{for:"status",value:"Status"}),E(a("select",{id:"status","onUpdate:modelValue":s[0]||(s[0]=e=>t.value.status_kunjungan=e),class:"block w-full outline-none border-2 border-neutral-grey-0 ring-0 focus:border-original-teal-300 focus:ring-original-teal-300 rounded-xl shadow-sm px-2.5 h-fit"},[(x(),N(O,null,K(P,e=>a("option",{value:e.id},M(e.label),9,X)),64))],512),[[R,t.value.status_kunjungan]]),n(p,{class:"mt-1"})]),a("div",Y,[n(g,{for:"pasien",value:"Identitas Pasien"}),n(m(v),{modelValue:t.value.patient,"onUpdate:modelValue":s[1]||(s[1]=e=>t.value.patient=e),mode:"single",placeholder:"NIK Pasien","filter-results":!1,object:!0,"min-chars":1,"resolve-on-load":!1,delay:300,searchable:!0,options:w,label:"label",valueProp:"satusehatId","track-by":"satusehatId",classes:f,required:""},null,8,["modelValue"]),n(p,{class:"mt-1"})]),a("div",ee,[n(g,{for:"dokter",value:"Identitas Dokter"}),n(m(v),{modelValue:t.value.dokter,"onUpdate:modelValue":s[2]||(s[2]=e=>t.value.dokter=e),mode:"single",placeholder:"Status",object:!0,options:_.value,label:"name",valueProp:"satusehat_id","track-by":"satusehat_id",class:"mt-1",classes:f,required:""},null,8,["modelValue","options"]),n(p,{class:"mt-1"})]),a("div",te,[n(g,{for:"lokasi_ruangan",value:"Lokasi Ruangan"}),n(m(v),{modelValue:t.value.lokasi_ruangan,"onUpdate:modelValue":s[3]||(s[3]=e=>t.value.lokasi_ruangan=e),mode:"single",placeholder:"Status",object:!0,options:h.value,label:"label",valueProp:"satusehat_id","track-by":"satusehat_id",class:"mt-1",classes:f,required:""},null,8,["modelValue","options"]),n(p,{class:"mt-1"})]),a("div",ae,[n(B,{isLoading:c.value,class:"w-full mb-3 mx-auto max-w-[284px] block teal-button text-original-white-0",type:"submit"},{default:u(()=>[b(" Daftar ")]),_:1},8,["isLoading"])])],40,Q)])]),_:1}))}};export{be as default};
