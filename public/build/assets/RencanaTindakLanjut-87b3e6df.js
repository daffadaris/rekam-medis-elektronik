import{r as i,aD as S,o as v,b as g,a as t,d as a,u as c,w as q,f as b,g as I,bE as y,e as D}from"./app-f0d7f9c0.js";import{s as _}from"./default-7ffdeea9.js";import{K as R}from"./main-77537e85.js";import{_ as P}from"./MainButtonSmall-93327a9a.js";import{_ as x}from"./TextInput-beb043c0.js";import{_ as l}from"./InputError-5b64019f.js";import{_ as n}from"./InputLabel-1f97d873.js";const K=["onSubmit"],O={class:"my-2 w-full"},U=t("h3",{class:"font-semibold text-secondhand-orange-300 mt-2"},"Rencana Tindak Lanjut",-1),A={class:"flex"},$={class:"w-full md:w-6/12 mr-2"},B={class:"flex"},F={class:"w-full md:w-6/12"},N={class:"flex"},E={class:"flex mt-3"},M={class:"w-full"},G={class:"flex"},W={class:"flex mt-3"},Z={class:"w-full"},z={class:"flex pt-1"},H={class:"flex mt-3"},J={class:"w-full"},Q={class:"flex"},X={class:"flex mt-3"},Y={class:"w-full"},ee={class:"flex"},te={class:"flex mt-3"},oe={class:"w-full"},ae={class:"flex"},se={class:"flex justify-end"},le={class:"mt-2 mr-3"},ne={key:0,class:"text-sm text-original-teal-300"},re={key:1,class:"text-sm text-thirdouter-red-300"},ve={__name:"RencanaTindakLanjut",props:{practitioner_reference:{type:Object,required:!1},subject_reference:{type:Object,required:!1},encounter_reference:{type:Object,required:!0}},setup(k){const d=k,o=i({priority:null,tindakLanjut:null,codetext:"",occurrenceDateTime:"",reasonCode:null,reasonCodetext:"",patientInstruction:""}),w=[{id:"rawatinap",label:"Rawat Inap"},{id:"kontrol",label:"Kontrol"},{id:"rujukan",label:"Rujukan"}],u=i(!1),p=i(!1),j=()=>{const r=new Date().toISOString().replace("Z","+00:00").replace(/\.\d{3}/,""),e=i({resourceType:"ServiceRequest",status:"active",intent:"original-order",priority:o.value.priority.code,category:[],code:{coding:[],text:o.value.codetext},subject:d.subject_reference,encounter:d.encounter_reference,occurrenceDateTime:r,requester:d.practitioner_reference,performer:[d.practitioner_reference],reasonCode:[{coding:[{system:o.value.reasonCode.system,code:o.value.reasonCode.code,display:o.value.reasonCode.display_en}],text:o.value.reasonCodetext}],patientInstruction:o.value.patientInstruction});o.value.tindakLanjut.id==="rawatinap"?(e.value.category.push({coding:[{system:"http://snomed.info/sct",code:"3457005",display:"Patient referral"}]}),e.value.code.coding.push({system:"http://snomed.info/sct",code:"737481003",display:"Inpatient care management"})):o.value.tindakLanjut.id==="kontrol"?(e.value.category.push({coding:[{system:"http://snomed.info/sct",code:"306098008",display:"Self-referral"}]}),e.value.category.push({coding:[{system:"http://snomed.info/sct",code:"11429006",display:"Consultation"}]}),e.value.code.coding.push({system:"http://snomed.info/sct",code:"185389009",display:"Follow-up visit"}),e.value.locationCode=[],e.value.locationCode.push({}),e.value.locationCode[0].coding=[],e.value.locationCode[0].coding.push({system:"http://terminology.hl7.org/CodeSystem/v3-RoleCode",code:"OF",display:"Outpatient Facility"})):o.value.tindakLanjut.id==="rujukan"&&(e.value.category.push({coding:[{system:"http://snomed.info/sct",code:"3457005",display:"Patient referral"}]}),e.value.category.push({coding:[{system:"http://snomed.info/sct",code:"11429006",display:"Consultation"}]}),e.value.code.coding.push({system:"http://snomed.info/sct",code:"3457005",display:"Patient referral"}),e.value.locationCode=[],e.value.locationCode.push({}),e.value.locationCode[0].coding=[],e.value.locationCode[0].coding.push({system:"http://terminology.hl7.org/CodeSystem/v3-RoleCode",code:"AMB",display:"Ambulance"})),y.post(route("integration.store",{res_type:e.value.resourceType}),e.value).then(s=>{u.value=!0,setTimeout(()=>{u.value=!1},3e3)}).catch(s=>{console.error("Error creating user:",s),p.value=!0,setTimeout(()=>{p.value=!1},3e3)})},C=async r=>{const{data:e}=await y.get(route("terminologi.icd10",{search:r})),s=e;for(const T in s){const f=s[T],L=`${f.display_id} | Code: ${f.code}`;f.label=L}return s},h=i(null),V=async()=>{const{data:r}=await y.get(route("terminologi.get"),{params:{resourceType:"ServiceRequest",attribute:"priority"}});h.value=r},m={container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer border-2 border-neutral-grey-0 ring-0 shadow-sm rounded-xl bg-white text-sm leading-snug outline-none",search:"w-full absolute inset-0 outline-none border-0 ring-0 focus:ring-original-teal-300 focus:ring-2 appearance-none box-border text-sm font-sans bg-white rounded-xl pl-3.5 rtl:pl-0 rtl:pr-3.5",placeholder:"flex items-center h-full absolute left-0 top-0 pointer-events-none bg-transparent leading-snug pl-3.5 text-gray-500 rtl:left-auto rtl:right-0 rtl:pl-0 rtl:pr-3.5",option:"flex items-center justify-start box-border text-left cursor-pointer text-sm leading-snug py-1.5 px-3",optionPointed:"text-white bg-original-teal-300",optionSelected:"text-white bg-original-teal-300",optionDisabled:"text-gray-300 cursor-not-allowed",optionSelectedPointed:"text-white bg-original-teal-300 opacity-90",optionSelectedDisabled:"text-green-100 bg-original-teal-300 bg-opacity-50 cursor-not-allowed"};return S(()=>{V()}),(r,e)=>(v(),g("div",null,[t("form",{onSubmit:I(j,["prevent"])},[t("div",O,[U,t("div",A,[t("div",$,[a(n,{for:"tindakLanjut",value:"Tindak Lanjut"}),t("div",B,[a(c(_),{modelValue:o.value.tindakLanjut,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.tindakLanjut=s),mode:"single",placeholder:"Tindak Lanjut",object:!0,options:w,label:"label",valueProp:"id","track-by":"id",class:"mt-1",classes:m,required:""},null,8,["modelValue"])]),a(l,{class:"mt-1"})]),t("div",F,[a(n,{for:"priority",value:"Prioritas"}),t("div",N,[a(c(_),{modelValue:o.value.priority,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.priority=s),mode:"single",placeholder:"Kategori",object:!0,options:h.value,label:"code",valueProp:"code","track-by":"code",class:"mt-1",classes:m,required:""},null,8,["modelValue","options"])]),a(l,{class:"mt-1"})])]),t("div",E,[t("div",M,[a(n,{for:"codetext",value:"Keterangan Tindak Lanjut"}),t("div",G,[a(x,{modelValue:o.value.codetext,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.codetext=s),id:"codetext",type:"text",class:"text-sm mt-1 block w-full",placeholder:"Keterangan",required:""},null,8,["modelValue"])]),a(l,{class:"mt-1"})])]),t("div",W,[t("div",Z,[a(n,{for:"occurrenceDateTime",value:"Rencana Waktu"}),t("div",z,[a(c(R),{modelValue:o.value.occurrenceDateTime,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.occurrenceDateTime=s),class:"border-[1.5px] border-neutral-grey-0 rounded-xl",required:""},null,8,["modelValue"])]),a(l,{class:"mt-1"})])]),t("div",H,[t("div",J,[a(n,{for:"reasonCode",value:"Alasan"}),t("div",Q,[a(c(_),{modelValue:o.value.reasonCode,"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.reasonCode=s),mode:"single",placeholder:"Diagnosa","filter-results":!1,object:!0,"min-chars":1,"resolve-on-load":!1,delay:1e3,searchable:!0,options:C,label:"label",valueProp:"code","track-by":"code",class:"mt-1",classes:m,required:""},null,8,["modelValue"])]),a(l,{class:"mt-1"})])]),t("div",X,[t("div",Y,[a(n,{for:"reasonCodetext",value:"Keterangan Alasan"}),t("div",ee,[a(x,{modelValue:o.value.reasonCodetext,"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.reasonCodetext=s),id:"reasonCodetext",type:"text",class:"text-sm mt-1 block w-full",placeholder:"Keterangan",required:""},null,8,["modelValue"])]),a(l,{class:"mt-1"})])]),t("div",te,[t("div",oe,[a(n,{for:"patientInstruction",value:"Instruksi Tindak Lanjut"}),t("div",ae,[a(x,{modelValue:o.value.patientInstruction,"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.patientInstruction=s),id:"patientInstruction",type:"text",class:"text-sm mt-1 block w-full",placeholder:"Instruksi",required:""},null,8,["modelValue"])]),a(l,{class:"mt-1"})])])]),t("div",se,[t("div",le,[a(P,{type:"submit",class:"teal-button text-original-white-0"},{default:q(()=>[D("Submit")]),_:1})])]),u.value?(v(),g("p",ne,"Sukses!")):b("",!0),p.value?(v(),g("p",re,"Gagal!")):b("",!0)],40,K)]))}};export{ve as default};
