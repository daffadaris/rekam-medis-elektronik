import{r as i,aD as T,o as g,b as v,a as t,d as a,u as b,w as P,f as S,g as q,bE as n,e as $}from"./app-f0d7f9c0.js";import{s as _}from"./default-7ffdeea9.js";import{_ as E}from"./TextInput-beb043c0.js";import{_ as L}from"./MainButtonSmall-93327a9a.js";import{_ as r}from"./InputError-5b64019f.js";import{_ as c}from"./InputLabel-1f97d873.js";const N=["onSubmit"],O={class:"my-2 w-full"},U=t("h3",{class:"font-semibold text-secondhand-orange-300 mt-2"},"Diagnosa Primer/Kerja",-1),A={class:"flex"},B={class:"w-full md:w-7/12 mr-2"},K={class:"flex"},M={class:"w-full md:w-5/12"},F={class:"flex"},G={class:"flex mt-3"},I={class:"w-full md:w-5/12"},R={class:"flex"},Z={class:"flex mt-3"},z={class:"w-full"},H={class:"flex"},J={class:"flex justify-end"},Q={class:"mt-2 mr-3"},W={key:0,class:"text-sm text-original-teal-300"},X={key:1,class:"text-sm text-thirdouter-red-300"},le={__name:"DiagnosisAkhirPrimer",props:{subject_reference:{type:Object,required:!1},encounter_reference:{type:Object,required:!0}},setup(w){const y=w,e=i({code:null,clinicalStatus:null,verificationStatus:null,note:""}),u=i(!1),d=i(!1),V=()=>{e.value.clinicalStatus=e.value.clinicalStatus?(({definition:o,...p})=>p)(e.value.clinicalStatus):e.value.clinicalStatus;const l=new Date().toISOString().replace("Z","+00:00").replace(/\.\d{3}/,""),s={resourceType:"Condition",clinicalStatus:{coding:[e.value.clinicalStatus]},category:[{coding:[{system:"http://terminology.hl7.org/CodeSystem/condition-category",code:"encounter-diagnosis",display:"Encounter Diagnosis"}]}],verificationStatus:{coding:[{system:e.value.verificationStatus.system,code:e.value.verificationStatus.code,display:e.value.verificationStatus.display}]},code:{coding:[{system:e.value.code.system,code:e.value.code.code,display:e.value.code.display_en}]},subject:y.subject_reference,encounter:y.encounter_reference,onsetDateTime:l,recordedDate:l,note:[{text:e.value.note}]};n.post(route("integration.store",{res_type:s.resourceType}),s).then(o=>{u.value=!0,setTimeout(()=>{u.value=!1},3e3)}).catch(o=>{console.error("Error creating user:",o),d.value=!0,setTimeout(()=>{d.value=!1},3e3)})},j=async l=>{const{data:s}=await n.get(route("terminologi.icd10",{search:l})),o=s;for(const p in o){const f=o[p],C=`${f.display_id} | Code: ${f.code}`;f.label=C}return o},x=i(null),D=async()=>{const{data:l}=await n.get(route("terminologi.get"),{params:{resourceType:"Condition",attribute:"clinicalStatus"}});x.value=l},h=i(null),k=async()=>{const{data:l}=await n.get(route("terminologi.get"),{params:{resourceType:"Condition",attribute:"verificationStatus"}});h.value=l},m={container:"relative mx-auto w-full flex items-center justify-end box-border cursor-pointer border-2 border-neutral-grey-0 ring-0 shadow-sm rounded-xl bg-white text-sm leading-snug outline-none",search:"w-full absolute inset-0 outline-none border-0 ring-0 focus:ring-original-teal-300 focus:ring-2 appearance-none box-border text-sm font-sans bg-white rounded-xl pl-3.5 rtl:pl-0 rtl:pr-3.5",placeholder:"flex items-center h-full absolute left-0 top-0 pointer-events-none bg-transparent leading-snug pl-3.5 text-gray-500 rtl:left-auto rtl:right-0 rtl:pl-0 rtl:pr-3.5",option:"flex items-center justify-start box-border text-left cursor-pointer text-sm leading-snug py-1.5 px-3",optionPointed:"text-white bg-original-teal-300",optionSelected:"text-white bg-original-teal-300",optionDisabled:"text-gray-300 cursor-not-allowed",optionSelectedPointed:"text-white bg-original-teal-300 opacity-90",optionSelectedDisabled:"text-green-100 bg-original-teal-300 bg-opacity-50 cursor-not-allowed"};return T(()=>{D(),k()}),(l,s)=>(g(),v("div",null,[t("form",{onSubmit:q(V,["prevent"])},[t("div",O,[U,t("div",A,[t("div",B,[a(c,{for:"diagnosa",value:"Diagnosa"}),t("div",K,[a(b(_),{modelValue:e.value.code,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value.code=o),mode:"single",placeholder:"Diagnosa","filter-results":!1,object:!0,"min-chars":1,"resolve-on-load":!1,delay:400,searchable:!0,options:j,label:"label",valueProp:"code","track-by":"code",class:"mt-1",classes:m,required:""},null,8,["modelValue"])]),a(r,{class:"mt-1"})]),t("div",M,[a(c,{for:"clinical_status",value:"Clinical Status"}),t("div",F,[a(b(_),{modelValue:e.value.clinicalStatus,"onUpdate:modelValue":s[1]||(s[1]=o=>e.value.clinicalStatus=o),mode:"single",placeholder:"Status",object:!0,options:x.value,label:"display",valueProp:"code","track-by":"code",class:"mt-1",classes:m,required:""},null,8,["modelValue","options"])]),a(r,{class:"mt-1"})])]),t("div",G,[t("div",I,[a(c,{for:"verificationStatus",value:"Verification Status"}),t("div",R,[a(b(_),{modelValue:e.value.verificationStatus,"onUpdate:modelValue":s[2]||(s[2]=o=>e.value.verificationStatus=o),mode:"single",placeholder:"Status",object:!0,options:h.value,label:"display",valueProp:"code","track-by":"code",class:"mt-1",classes:m,required:""},null,8,["modelValue","options"])]),a(r,{class:"mt-1"})])]),t("div",Z,[t("div",z,[a(c,{for:"note",value:"Keterangan"}),t("div",H,[a(E,{modelValue:e.value.note,"onUpdate:modelValue":s[3]||(s[3]=o=>e.value.note=o),id:"note",type:"text",class:"text-sm mt-1 block w-full",placeholder:"Keterangan",required:""},null,8,["modelValue"])]),a(r,{class:"mt-1"})])])]),t("div",J,[t("div",Q,[a(L,{type:"submit",class:"teal-button text-original-white-0"},{default:P(()=>[$("Submit")]),_:1})])]),u.value?(g(),v("p",W,"Sukses!")):S("",!0),d.value?(g(),v("p",X,"Gagal!")):S("",!0)],40,N)]))}};export{le as default};
